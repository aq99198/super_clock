A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE     1


MACRO ASSEMBLER A51 V7.08a
OBJECT MODULE PLACED IN main.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE main.src PR(.\main.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\main.SRC generated from: main.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND SRC(.\main.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    MAIN
                       8     
  0092                 9     P1M0    DATA    092H
  0093                10     P0M1    DATA    093H
  0096                11     P2M0    DATA    096H
  0091                12     P1M1    DATA    091H
  0080                13     P0      DATA    080H
  00B2                14     P3M0    DATA    0B2H
  0095                15     P2M1    DATA    095H
  0090                16     P1      DATA    090H
  00B4                17     P4M0    DATA    0B4H
  00B1                18     P3M1    DATA    0B1H
  00A0                19     P2      DATA    0A0H
  00CA                20     P5M0    DATA    0CAH
  00B3                21     P4M1    DATA    0B3H
  00B0                22     P3      DATA    0B0H
  00C9                23     P5M1    DATA    0C9H
  00C0                24     P4      DATA    0C0H
  00D6                25     AC      BIT     0D0H.6
  00C8                26     P5      DATA    0C8H
  00AF                27     EA      BIT     0A8H.7
  00CE                28     SPCTL   DATA    0CEH
  00DF                29     CF      BIT     0D8H.7
  00F9                30     CH      DATA    0F9H
  00AD                31     EADC    BIT     0A8H.5
  00A8                32     IE      DATA    0A8H
  00E9                33     CL      DATA    0E9H
  00C5                34     IAP_CMD DATA    0C5H
  00FA                35     CCAP0H  DATA    0FAH
  00FB                36     CCAP1H  DATA    0FBH
  00BD                37     ADC_RES DATA    0BDH
  00B6                38     IPH2    DATA    0B6H
  0091                39     DQ      BIT     090H.1
  00EA                40     CCAP0L  DATA    0EAH
  00DE                41     CR      BIT     0D8H.6
  00EB                42     CCAP1L  DATA    0EBH
  00DA                43     CCAPM0  DATA    0DAH
  00DB                44     CCAPM1  DATA    0DBH
  00AC                45     ES      BIT     0A8H.4
  00BD                46     PADC    BIT     0B8H.5
  00B8                47     IP      DATA    0B8H
  0098                48     RI      BIT     098H.0
  00D7                49     CY      BIT     0D0H.7
  0099                50     TI      BIT     098H.1
  0097                51     CLK_DIV DATA    097H
  00C3                52     IAP_ADDRH       DATA    0C3H
  00BC                53     PS      BIT     0B8H.4
  0081                54     SP      DATA    081H
  00C4                55     IAP_ADDRL       DATA    0C4H
  00D9                56     CMOD    DATA    0D9H
  00D8                57     CCON    DATA    0D8H
  00BF                58     PPCA    BIT     0B8H.7
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE     2

  00D2                59     OV      BIT     0D0H.2
  00AE                60     ELVD    BIT     0A8H.6
  00BB                61     P4SW    DATA    0BBH
  00BC                62     ADC_CONTR       DATA    0BCH
  0099                63     SBUF    DATA    099H
  0087                64     PCON    DATA    087H
  0098                65     SCON    DATA    098H
  008F                66     WAKE_CLKO       DATA    08FH
  0089                67     TMOD    DATA    089H
  0088                68     TCON    DATA    088H
  00BE                69     PLVD    BIT     0B8H.6
  0089                70     IE0     BIT     088H.1
  00A1                71     BUS_SPEED       DATA    0A1H
  008B                72     IE1     BIT     088H.3
  00AF                73     IE2     DATA    0AFH
  008E                74     AUXR    DATA    08EH
  00F0                75     B       DATA    0F0H
  00C7                76     IAP_CONTR       DATA    0C7H
  00E0                77     ACC     DATA    0E0H
  00A9                78     ET0     BIT     0A8H.1
  008D                79     TF0     BIT     088H.5
  00AB                80     ET1     BIT     0A8H.3
  008F                81     TF1     BIT     088H.7
  00B5                82     IP2     DATA    0B5H
  009A                83     RB8     BIT     098H.2
  008C                84     TH0     DATA    08CH
  008D                85     TH1     DATA    08DH
  0088                86     IT0     BIT     088H.0
  00A8                87     EX0     BIT     0A8H.0
  009B                88     TB8     BIT     098H.3
  008A                89     IT1     BIT     088H.2
  00AA                90     EX1     BIT     0A8H.2
  00D0                91     P       BIT     0D0H.0
  009F                92     SM0     BIT     098H.7
  008A                93     TL0     DATA    08AH
  009E                94     SM1     BIT     098H.6
  008B                95     TL1     DATA    08BH
  009D                96     SM2     BIT     098H.5
  00B9                97     PT0     BIT     0B8H.1
  00BB                98     PT1     BIT     0B8H.3
  00D3                99     RS0     BIT     0D0H.3
  00C2               100     IAP_DATA        DATA    0C2H
  008C               101     TR0     BIT     088H.4
  00D4               102     RS1     BIT     0D0H.4
  008E               103     TR1     BIT     088H.6
  00C1               104     WDT_CONTR       DATA    0C1H
  00B8               105     PX0     BIT     0B8H.0
  00BA               106     PX1     BIT     0B8H.2
  00F2               107     PCA_PWM0        DATA    0F2H
  00F3               108     PCA_PWM1        DATA    0F3H
  009D               109     P1ASF   DATA    09DH
  0083               110     DPH     DATA    083H
  00BE               111     ADC_RESL        DATA    0BEH
  0082               112     DPL     DATA    082H
  00CD               113     SPSTAT  DATA    0CDH
  00B7               114     IPH     DATA    0B7H
  009B               115     S2BUF   DATA    09BH
  009C               116     REN     BIT     098H.4
  009A               117     S2CON   DATA    09AH
  009C               118     BRT     DATA    09CH
  00B9               119     SADEN   DATA    0B9H
  00A9               120     SADDR   DATA    0A9H
  00C6               121     IAP_TRIG        DATA    0C6H
  00A2               122     AUXR1   DATA    0A2H
  00D5               123     F0      BIT     0D0H.5
  00D0               124     PSW     DATA    0D0H
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE     3

  00D8               125     CCF0    BIT     0D8H.0
  00CF               126     SPDAT   DATA    0CFH
  00D9               127     CCF1    BIT     0D8H.1
  0094               128     P0M0    DATA    094H
                     129     ?PR?_udelay?MAIN     SEGMENT CODE 
                     130     ?PR?_mdelay?MAIN     SEGMENT CODE 
                     131     ?DT?_mdelay?MAIN     SEGMENT DATA OVERLAYABLE 
                     132     ?PR?ds1302_init?MAIN SEGMENT CODE 
                     133     ?PR?ds1302_reset?MAIN                    SEGMENT CODE 
                     134     ?BI?ds1302_reset?MAIN                    SEGMENT BIT OVERLAYABLE 
                     135     ?PR?_ds1302_write_byte?MAIN              SEGMENT CODE 
                     136     ?DT?_ds1302_write_byte?MAIN              SEGMENT DATA OVERLAYABLE 
                     137     ?PR?ds1302_read_byte?MAIN                SEGMENT CODE 
                     138     ?DT?ds1302_read_byte?MAIN                SEGMENT DATA OVERLAYABLE 
                     139     ?PR?ds1302_start?MAIN                    SEGMENT CODE 
                     140     ?PR?ds1302_read_temp?MAIN                SEGMENT CODE 
                     141     ?DT?ds1302_read_temp?MAIN                SEGMENT DATA OVERLAYABLE 
                     142     ?PR?uart_init?MAIN   SEGMENT CODE 
                     143     ?PR?_UART_Send_Byte?MAIN                 SEGMENT CODE 
                     144     ?PR?_UART_Send_Dat?MAIN                  SEGMENT CODE 
                     145     ?PR?main?MAIN        SEGMENT CODE 
                     146             EXTRN   CODE (?C?IMUL)
                     147             EXTRN   CODE (?C_STARTUP)
                     148             PUBLIC  main
                     149             PUBLIC  _UART_Send_Dat
                     150             PUBLIC  _UART_Send_Byte
                     151             PUBLIC  uart_init
                     152             PUBLIC  _mdelay
                     153             PUBLIC  _udelay
                     154     
----                 155             RSEG  ?DT?_ds1302_write_byte?MAIN
0000                 156     ?_ds1302_write_byte?BYTE:
0000                 157             val?444:   DS   1
                     158     
----                 159             RSEG  ?BI?ds1302_reset?MAIN
0000                 160     ?ds1302_reset?BIT:
0000                 161            flag?343:   DBIT   1
                     162     
----                 163             RSEG  ?DT?ds1302_read_byte?MAIN
0000                 164     ?ds1302_read_byte?BYTE:
0000                 165           value?547:   DS   1
                     166     
----                 167             RSEG  ?DT?ds1302_read_temp?MAIN
0000                 168     ?ds1302_read_temp?BYTE:
0000                 169       temp_data?748:   DS   2
                     170     
----                 171             RSEG  ?DT?_mdelay?MAIN
0000                 172     ?_mdelay?BYTE:
0000                 173              ms?142:   DS   2
                     174     ; /*
                     175     ;  * DS18B20 
                     176     ; */
                     177     ; 
                     178     ; #include "STC12C5A60S2.H"
                     179     ; #include <intrins.h> 
                     180     ; 
                     181     ; #define SYS_CLK 22118400UL
                     182     ; #define STC_1T
                     183     ; 
                     184     ; typedef unsigned char uint8;
                     185     ; typedef unsigned int uint16;
                     186     ; typedef char int8;
                     187     ; typedef int int16;
                     188     ; typedef bit bool;
                     189     ; 
                     190     ; #define DQ_BIT        1
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE     4

                     191     ; sbit DQ  = P1^1;
                     192     ; 
                     193     ; #define SET_P1_INPUT(b)       do { \
                     194     ;       P1M0 &= ~(1<<(b)); \
                     195     ;       P1M1 |= 1<<(b); \
                     196     ; } while (0)
                     197     ; 
                     198     ; #define SET_P1_OUTPUT(b)      do { \
                     199     ;       P1M0 &= ~(1<<(b)); \
                     200     ;       P1M1 &= ~(1<<(b)); \
                     201     ; } while (0)
                     202     ; 
                     203     ; 
                     204     ; #if 1
                     205     ; void udelay(uint16 us)
                     206     
----                 207             RSEG  ?PR?_udelay?MAIN
0000                 208     L?0059:
                     209             USING   0
0000 C291            210             CLR     DQ
0002                 211     L?0060:
0002 7F04            212             MOV     R7,#04H
0004 7E00            213             MOV     R6,#00H
0006                 214     _udelay:
                     215             USING   0
                     216                             ; SOURCE LINE # 32
                     217     ;---- Variable 'us?040' assigned to Register 'R2/R3' ----
0006 AB07            218             MOV     R3,AR7
0008 AA06            219             MOV     R2,AR6
                     220     ; {
                     221                             ; SOURCE LINE # 33
                     222     ; #if SYS_CLK == 11059200UL
                     223     ;       uint16 tmp;
                     224     ; 
                     225     ;       us >>= 4;
                     226     ;       tmp = us;
                     227     ;       // us * 11059200 / 12000000 = us * 11 / 12 = us - us / 12 = us - (us * 21) >> 8
                     228     ;       us *= 21;
                     229     ;       us >>= 8;
                     230     ;       us = tmp - us;
                     231     ; #elif SYS_CLK == 12000000UL
                     232     ;       us >>= 4;
                     233     ; #elif SYS_CLK == 22118400UL
                     234     ;       uint16 tmp;
                     235     ;       
                     236     ;       us >>= 4;
                     237                             ; SOURCE LINE # 48
000A EA              238             MOV     A,R2
000B C4              239             SWAP    A
000C F8              240             MOV     R0,A
000D 54F0            241             ANL     A,#0F0H
000F C8              242             XCH     A,R0
0010 68              243             XRL     A,R0
0011 FA              244             MOV     R2,A
0012 EB              245             MOV     A,R3
0013 C4              246             SWAP    A
0014 540F            247             ANL     A,#0FH
0016 48              248             ORL     A,R0
                     249     ;       tmp = us;
                     250                             ; SOURCE LINE # 49
                     251     ;---- Variable 'tmp?041' assigned to Register 'DPTR' ----
0017 F582            252             MOV     DPL,A
0019 8A83            253             MOV     DPH,R2
                     254     ;       // us * 22118400 / 12000000 = us * 11 / 6 = 2 * us - us / 6 = 2 * us - (us * 43) >>
                              8
                     255     ;       us *= 43;
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE     5

                     256                             ; SOURCE LINE # 51
001B 7C00            257             MOV     R4,#00H
001D 7D2B            258             MOV     R5,#02BH
001F FF              259             MOV     R7,A
0020 AE02            260             MOV     R6,AR2
0022 120000   F      261             LCALL   ?C?IMUL
0025 AA06            262             MOV     R2,AR6
                     263     ;       us >>= 8;
                     264                             ; SOURCE LINE # 52
0027 EA              265             MOV     A,R2
0028 FB              266             MOV     R3,A
0029 7A00            267             MOV     R2,#00H
                     268     ;       us = (tmp << 2) - us;
                     269                             ; SOURCE LINE # 53
002B E582            270             MOV     A,DPL
002D AE83            271             MOV     R6,DPH
002F 7802            272             MOV     R0,#02H
0031                 273     ?C0055:
0031 C3              274             CLR     C
0032 33              275             RLC     A
0033 CE              276             XCH     A,R6
0034 33              277             RLC     A
0035 CE              278             XCH     A,R6
0036 D8F9            279             DJNZ    R0,?C0055
0038 C3              280             CLR     C
0039 9B              281             SUBB    A,R3
003A FB              282             MOV     R3,A
003B EE              283             MOV     A,R6
003C 9A              284             SUBB    A,R2
                     285     ; #else
                     286     ;       us = SYS_CLK * us / 12000000
                     287     ; #endif
                     288     ; 
                     289     ; #ifdef STC_1T
                     290     ;       us *= 12;
                     291                             ; SOURCE LINE # 59
003D 7C00            292             MOV     R4,#00H
003F 7D0C            293             MOV     R5,#0CH
0041 AF03            294             MOV     R7,AR3
0043 FE              295             MOV     R6,A
0044 120000   F      296             LCALL   ?C?IMUL
                     297     ; #pragma asm
                     298     ;               // 16 machine cycle = 16 clock cycle
                     299               
                     300     ;               INC             R6
0047 0E              301               INC           R6
                     302     ;               CJNE    R7,     #0,     LOOP    // 4
0048 BF0002          303               CJNE  R7,     #0,     LOOP     
                     304     ;               AJMP    LOOP1
004B 0100     F      305               AJMP  LOOP1
                     306     ; LOOP: NOP                                             // 1
004D 00              307               LOOP: NOP                                              
                     308     ;               NOP                                             // 1
004E 00              309               NOP                                            
                     310     ;               NOP                                             // 1
004F 00              311               NOP                                            
                     312     ;               NOP                                             // 1
0050 00              313               NOP                                            
                     314     ;               NOP                                             // 1
0051 00              315               NOP                                            
                     316     ;               NOP                                             // 1
0052 00              317               NOP                                            
                     318     ;               NOP                                             // 1
0053 00              319               NOP                                            
                     320     ;               NOP                                             // 1
0054 00              321               NOP                                            
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE     6

                     322     ;               NOP                                             // 1
0055 00              323               NOP                                            
                     324     ;               NOP                                             // 1
0056 00              325               NOP                                            
                     326     ;               NOP                                             // 1
0057 00              327               NOP                                            
                     328     ;               NOP                                             // 1
0058 00              329               NOP                                            
                     330     ;               DJNZ    R7, LOOP                // 4
0059 DFF2            331               DJNZ  R7, LOOP                 
                     332     ; LOOP1:        DJNZ    R6, LOOP                // 4
005B DEF0            333               LOOP1:        DJNZ    R6, LOOP                 
                     334     ; #pragma endasm
                     335     ; 
                     336     ; #else
                     337     ; 
                     338     ; #pragma asm
                     339     ;               // 16 machine cycle = 16 * 12 clock cycle
                     340     ;               INC             R6
                     341     ;               CJNE    R7,     #0,     LOOP    // 2
                     342     ;               AJMP    LOOP1
                     343     ; LOOP: NOP                                             // 1
                     344     ;               NOP                                             // 1
                     345     ;               NOP                                             // 1
                     346     ;               NOP                                             // 1
                     347     ;               NOP                                             // 1
                     348     ;               NOP                                             // 1
                     349     ;               NOP                                             // 1
                     350     ;               NOP                                             // 1
                     351     ;               NOP                                             // 1
                     352     ;               NOP                                             // 1
                     353     ;               NOP                                             // 1
                     354     ;               NOP                                             // 1
                     355     ;               NOP                                             // 1
                     356     ;               NOP                                             // 1
                     357     ;               DJNZ    R7, LOOP                // 2
                     358     ; LOOP1:        DJNZ    R6, LOOP                // 2
                     359     ; #pragma endasm
                     360     ; #endif
                     361     ; }
                     362                             ; SOURCE LINE # 106
005D 22              363             RET     
                     364     ; END OF _udelay
                     365     
                     366     ; #else
                     367     ; void udelay(uint16 us)
                     368     ; {
                     369     ;       int n = 12;
                     370     ; 
                     371     ;       while(us--)
                     372     ;       {
                     373     ;               while(n--);             
                     374     ;       }
                     375     ; }
                     376     ; #endif
                     377     ; 
                     378     ; 
                     379     ; void mdelay(uint16 ms)
                     380     
----                 381             RSEG  ?PR?_mdelay?MAIN
0000                 382     _mdelay:
                     383             USING   0
                     384                             ; SOURCE LINE # 120
0000 8E00     F      385             MOV     ms?142,R6
0002 8F00     F      386             MOV     ms?142+01H,R7
                     387     ; {
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE     7

                     388                             ; SOURCE LINE # 121
0004                 389     ?C0002:
                     390     ;       while (ms--)
                     391                             ; SOURCE LINE # 122
0004 E500     F      392             MOV     A,ms?142+01H
0006 1500     F      393             DEC     ms?142+01H
0008 AE00     F      394             MOV     R6,ms?142
000A 7002            395             JNZ     ?C0056
000C 1500     F      396             DEC     ms?142
000E                 397     ?C0056:
000E 4E              398             ORL     A,R6
000F 6009            399             JZ      ?C0004
                     400     ;       {
                     401                             ; SOURCE LINE # 123
                     402     ;               udelay(1000);
                     403                             ; SOURCE LINE # 124
0011 7FE8            404             MOV     R7,#0E8H
0013 7E03            405             MOV     R6,#03H
0015 120000   F      406             LCALL   _udelay
                     407     ;       }
                     408                             ; SOURCE LINE # 125
0018 80EA            409             SJMP    ?C0002
                     410     ; }
                     411                             ; SOURCE LINE # 126
001A                 412     ?C0004:
001A 22              413             RET     
                     414     ; END OF _mdelay
                     415     
                     416     ; 
                     417     ; 
                     418     ; static void ds1302_init(void)
                     419     
----                 420             RSEG  ?PR?ds1302_init?MAIN
0000                 421     ds1302_init:
                     422                             ; SOURCE LINE # 129
                     423     ; {
                     424                             ; SOURCE LINE # 130
                     425     ;       //io input
                     426     ;       SET_P1_OUTPUT(DQ_BIT);
                     427                             ; SOURCE LINE # 132
0000 5392FD          428             ANL     P1M0,#0FDH
0003 5391FD          429             ANL     P1M1,#0FDH
                     430     ;       DQ = 1;
                     431                             ; SOURCE LINE # 133
0006 D291            432             SETB    DQ
                     433     ; }
                     434                             ; SOURCE LINE # 134
0008 22              435             RET     
                     436     ; END OF ds1302_init
                     437     
                     438     ; 
                     439     ; static void ds1302_reset(void)
                     440     
----                 441             RSEG  ?PR?ds1302_reset?MAIN
0000                 442     ds1302_reset:
                     443             USING   0
                     444                             ; SOURCE LINE # 136
                     445     ; {
                     446                             ; SOURCE LINE # 137
                     447     ;       bool flag = 1;
                     448                             ; SOURCE LINE # 138
0000 D200     F      449             SETB    flag?343
0002                 450     ?C0009:
                     451     ; 
                     452     ;       while (flag)
                     453                             ; SOURCE LINE # 140
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE     8

0002 30003E   F      454             JNB     flag?343,?C0021
                     455     ;       {
                     456                             ; SOURCE LINE # 141
0005                 457     ?C0011:
                     458     ;               while (flag)
                     459                             ; SOURCE LINE # 142
0005 30002D   F      460             JNB     flag?343,?C0012
                     461     ;               {
                     462                             ; SOURCE LINE # 143
                     463     ;                       SET_P1_OUTPUT(DQ_BIT);
                     464                             ; SOURCE LINE # 144
0008 5392FD          465             ANL     P1M0,#0FDH
000B 5391FD          466             ANL     P1M1,#0FDH
                     467     ;                       DQ = 1;
                     468                             ; SOURCE LINE # 145
000E D291            469             SETB    DQ
                     470     ;                       udelay(16);
                     471                             ; SOURCE LINE # 146
0010 7F10            472             MOV     R7,#010H
0012 7E00            473             MOV     R6,#00H
0014 120000   F      474             LCALL   _udelay
                     475     ;                       DQ = 0;
                     476                             ; SOURCE LINE # 147
0017 C291            477             CLR     DQ
                     478     ;                       udelay(550); // 550us
                     479                             ; SOURCE LINE # 148
0019 7F26            480             MOV     R7,#026H
001B 7E02            481             MOV     R6,#02H
001D 120000   F      482             LCALL   _udelay
                     483     ;                       DQ = 1; 
                     484                             ; SOURCE LINE # 149
0020 D291            485             SETB    DQ
                     486     ;                       udelay(66);  // 66us
                     487                             ; SOURCE LINE # 150
0022 7F42            488             MOV     R7,#042H
0024 7E00            489             MOV     R6,#00H
0026 120000   F      490             LCALL   _udelay
                     491     ;                       SET_P1_INPUT(DQ_BIT);
                     492                             ; SOURCE LINE # 151
0029 5392FD          493             ANL     P1M0,#0FDH
002C 439102          494             ORL     P1M1,#02H
                     495     ;                       flag = DQ;
                     496                             ; SOURCE LINE # 152
002F A291            497             MOV     C,DQ
0031 9200     F      498             MOV     flag?343,C
                     499     ;               }
                     500                             ; SOURCE LINE # 153
0033 80D0            501             SJMP    ?C0011
0035                 502     ?C0012:
                     503     ;               udelay(500);    // 500us
                     504                             ; SOURCE LINE # 154
0035 7FF4            505             MOV     R7,#0F4H
0037 7E01            506             MOV     R6,#01H
0039 120000   F      507             LCALL   _udelay
                     508     ;               flag = ~DQ;
                     509                             ; SOURCE LINE # 155
003C A291            510             MOV     C,DQ
003E B3              511             CPL     C
003F 9200     F      512             MOV     flag?343,C
                     513     ;       }
                     514                             ; SOURCE LINE # 156
0041 80BF            515             SJMP    ?C0009
0043                 516     ?C0021:
                     517     ;       SET_P1_OUTPUT(DQ_BIT);
                     518                             ; SOURCE LINE # 157
0043 5392FD          519             ANL     P1M0,#0FDH
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE     9

0046 5391FD          520             ANL     P1M1,#0FDH
                     521     ;       DQ=1;
                     522                             ; SOURCE LINE # 158
0049 D291            523             SETB    DQ
                     524     ; }
                     525                             ; SOURCE LINE # 159
004B 22              526             RET     
                     527     ; END OF ds1302_reset
                     528     
                     529     ; 
                     530     ; static void ds1302_write_byte(uint8 val)
                     531     
----                 532             RSEG  ?PR?_ds1302_write_byte?MAIN
0000                 533     _ds1302_write_byte:
                     534             USING   0
                     535                             ; SOURCE LINE # 161
0000 8F00     F      536             MOV     val?444,R7
                     537     ; {
                     538                             ; SOURCE LINE # 162
                     539     ;       uint8 i;
                     540     ; 
                     541     ;       SET_P1_OUTPUT(DQ_BIT);
                     542                             ; SOURCE LINE # 165
0002 5392FD          543             ANL     P1M0,#0FDH
0005 5391FD          544             ANL     P1M1,#0FDH
                     545     ;       for (i=0; i<8; i++)
                     546                             ; SOURCE LINE # 166
                     547     ;---- Variable 'i?445' assigned to Register 'R1' ----
0008 E4              548             CLR     A
0009 F9              549             MOV     R1,A
000A                 550     ?C0026:
                     551     ;       {
                     552                             ; SOURCE LINE # 167
                     553     ;               DQ = 1;
                     554                             ; SOURCE LINE # 168
000A D291            555             SETB    DQ
                     556     ;               udelay(1);
                     557                             ; SOURCE LINE # 169
000C 7F01            558             MOV     R7,#01H
000E 7E00            559             MOV     R6,#00H
0010 120000   F      560             LCALL   _udelay
                     561     ;               DQ = 0;
                     562                             ; SOURCE LINE # 170
                     563     ;               udelay(4); //4us
                     564                             ; SOURCE LINE # 171
0013 120000   F      565             LCALL   L?0059
                     566     ;               DQ = val & 0x01; 
                     567                             ; SOURCE LINE # 172
0016 E500     F      568             MOV     A,val?444
0018 13              569             RRC     A
0019 9291            570             MOV     DQ,C
                     571     ;               udelay(66); //66us
                     572                             ; SOURCE LINE # 173
001B 7F42            573             MOV     R7,#042H
001D 7E00            574             MOV     R6,#00H
001F 120000   F      575             LCALL   _udelay
                     576     ;               val >>= 1;
                     577                             ; SOURCE LINE # 174
0022 E500     F      578             MOV     A,val?444
0024 C3              579             CLR     C
0025 13              580             RRC     A
0026 F500     F      581             MOV     val?444,A
                     582     ;       }
                     583                             ; SOURCE LINE # 175
0028 09              584             INC     R1
0029 B908DE          585             CJNE    R1,#08H,?C0026
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE    10

002C                 586     ?C0027:
                     587     ;       DQ = 1;
                     588                             ; SOURCE LINE # 176
002C D291            589             SETB    DQ
                     590     ;       udelay(10);  
                     591                             ; SOURCE LINE # 177
002E 7F0A            592             MOV     R7,#0AH
0030 7E00            593             MOV     R6,#00H
0032 020000   F      594             LJMP    _udelay
                     595     ; END OF _ds1302_write_byte
                     596     
                     597     ; }
                     598     ; 
                     599     ; static uint8 ds1302_read_byte(void)
                     600     
----                 601             RSEG  ?PR?ds1302_read_byte?MAIN
0000                 602     ds1302_read_byte:
                     603             USING   0
                     604                             ; SOURCE LINE # 180
                     605     ; {
                     606                             ; SOURCE LINE # 181
                     607     ;       uint8 i, value=0;
                     608                             ; SOURCE LINE # 182
0000 E4              609             CLR     A
0001 F500     F      610             MOV     value?547,A
                     611     ; 
                     612     ;       for (i=0; i<8; i++)
                     613                             ; SOURCE LINE # 184
                     614     ;---- Variable 'i?546' assigned to Register 'R1' ----
0003 F9              615             MOV     R1,A
0004                 616     ?C0030:
                     617     ;       {
                     618                             ; SOURCE LINE # 185
                     619     ;               SET_P1_OUTPUT(DQ_BIT);
                     620                             ; SOURCE LINE # 186
0004 5392FD          621             ANL     P1M0,#0FDH
0007 5391FD          622             ANL     P1M1,#0FDH
                     623     ;               DQ=1;
                     624                             ; SOURCE LINE # 187
000A D291            625             SETB    DQ
                     626     ;               udelay(1);
                     627                             ; SOURCE LINE # 188
000C 7F01            628             MOV     R7,#01H
000E 7E00            629             MOV     R6,#00H
0010 120000   F      630             LCALL   _udelay
                     631     ;               value >>= 1;
                     632                             ; SOURCE LINE # 189
0013 E500     F      633             MOV     A,value?547
0015 C3              634             CLR     C
0016 13              635             RRC     A
0017 F500     F      636             MOV     value?547,A
                     637     ;               DQ = 0;
                     638                             ; SOURCE LINE # 190
                     639     ;               udelay(4);   //4us
                     640                             ; SOURCE LINE # 191
0019 120000   F      641             LCALL   L?0059
                     642     ;               DQ = 1;
                     643                             ; SOURCE LINE # 192
001C D291            644             SETB    DQ
                     645     ;               udelay(4);   //4us 
                     646                             ; SOURCE LINE # 193
001E 120000   F      647             LCALL   L?0060
                     648     ;               SET_P1_INPUT(DQ_BIT);
                     649                             ; SOURCE LINE # 194
0021 5392FD          650             ANL     P1M0,#0FDH
0024 439102          651             ORL     P1M1,#02H
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE    11

                     652     ;               if (DQ)
                     653                             ; SOURCE LINE # 195
0027 309103          654             JNB     DQ,?C0039
                     655     ;                       value|=0x80;
                     656                             ; SOURCE LINE # 196
002A 430080   F      657             ORL     value?547,#080H
002D                 658     ?C0039:
                     659     ;               udelay(66);  //66us
                     660                             ; SOURCE LINE # 197
002D 7F42            661             MOV     R7,#042H
002F 7E00            662             MOV     R6,#00H
0031 120000   F      663             LCALL   _udelay
                     664     ;       }
                     665                             ; SOURCE LINE # 198
0034 09              666             INC     R1
0035 B908CC          667             CJNE    R1,#08H,?C0030
0038                 668     ?C0042:
                     669     ;       SET_P1_OUTPUT(DQ_BIT);
                     670                             ; SOURCE LINE # 199
0038 5392FD          671             ANL     P1M0,#0FDH
003B 5391FD          672             ANL     P1M1,#0FDH
                     673     ;       DQ=1;
                     674                             ; SOURCE LINE # 200
003E D291            675             SETB    DQ
                     676     ; 
                     677     ;       return value;
                     678                             ; SOURCE LINE # 202
0040 AF00     F      679             MOV     R7,value?547
                     680     ; }
                     681                             ; SOURCE LINE # 203
0042                 682     ?C0043:
0042 22              683             RET     
                     684     ; END OF ds1302_read_byte
                     685     
                     686     ; 
                     687     ; static void ds1302_start(void)
                     688     
----                 689             RSEG  ?PR?ds1302_start?MAIN
0000                 690     ds1302_start:
                     691             USING   0
                     692                             ; SOURCE LINE # 205
                     693     ; {
                     694                             ; SOURCE LINE # 206
                     695     ;       ds1302_reset();
                     696                             ; SOURCE LINE # 207
0000 120000   F      697             LCALL   ds1302_reset
                     698     ;       ds1302_write_byte(0xCC); // Skip ROM cmd
                     699                             ; SOURCE LINE # 208
0003 7FCC            700             MOV     R7,#0CCH
0005 120000   F      701             LCALL   _ds1302_write_byte
                     702     ;       ds1302_write_byte(0x44); // convert cmd
                     703                             ; SOURCE LINE # 209
0008 7F44            704             MOV     R7,#044H
000A 020000   F      705             LJMP    _ds1302_write_byte
                     706     ; END OF ds1302_start
                     707     
                     708     ; }
                     709     ; 
                     710     ; static int16 ds1302_read_temp(void)
                     711     
----                 712             RSEG  ?PR?ds1302_read_temp?MAIN
0000                 713     ds1302_read_temp:
                     714             USING   0
                     715                             ; SOURCE LINE # 212
                     716     ; {
                     717                             ; SOURCE LINE # 213
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE    12

                     718     ;       uint8 temp_data[2]; // 读出温度暂放
                     719     ;       int16 temp;
                     720     ; 
                     721     ;       ds1302_reset();
                     722                             ; SOURCE LINE # 217
0000 120000   F      723             LCALL   ds1302_reset
                     724     ;       ds1302_write_byte(0xCC); // Skip ROM cmd
                     725                             ; SOURCE LINE # 218
0003 7FCC            726             MOV     R7,#0CCH
0005 120000   F      727             LCALL   _ds1302_write_byte
                     728     ;       ds1302_write_byte(0xBE); // read
                     729                             ; SOURCE LINE # 219
0008 7FBE            730             MOV     R7,#0BEH
000A 120000   F      731             LCALL   _ds1302_write_byte
                     732     ;       temp_data[0] = ds1302_read_byte();  // low 8 bits
                     733                             ; SOURCE LINE # 220
000D 120000   F      734             LCALL   ds1302_read_byte
0010 8F00     F      735             MOV     temp_data?748,R7
                     736     ;       temp_data[1] = ds1302_read_byte();  // high 8 bits
                     737                             ; SOURCE LINE # 221
0012 120000   F      738             LCALL   ds1302_read_byte
0015 8F00     F      739             MOV     temp_data?748+01H,R7
                     740     ; 
                     741     ;       temp = temp_data[1];
                     742                             ; SOURCE LINE # 223
                     743     ;---- Variable 'temp?749' assigned to Register 'R6/R7' ----
                     744     ;       temp <<= 8;
                     745                             ; SOURCE LINE # 224
0017 EF              746             MOV     A,R7
0018 FE              747             MOV     R6,A
                     748     ;       temp |= temp_data[0];
                     749                             ; SOURCE LINE # 225
0019 E500     F      750             MOV     A,temp_data?748
001B FF              751             MOV     R7,A
                     752     ;       temp >>= 4;
                     753                             ; SOURCE LINE # 226
001C EF              754             MOV     A,R7
001D 7804            755             MOV     R0,#04H
001F                 756     ?C0057:
001F CE              757             XCH     A,R6
0020 A2E7            758             MOV     C,ACC.7
0022 13              759             RRC     A
0023 CE              760             XCH     A,R6
0024 13              761             RRC     A
0025 D8F8            762             DJNZ    R0,?C0057
0027 FF              763             MOV     R7,A
                     764     ; 
                     765     ;       return temp;
                     766                             ; SOURCE LINE # 228
                     767     ; }
                     768                             ; SOURCE LINE # 229
0028                 769     ?C0045:
0028 22              770             RET     
                     771     ; END OF ds1302_read_temp
                     772     
                     773     ; 
                     774     ; 
                     775     ; /**
                     776     ;  * UART初始化
                     777     ;  * 波特率：9600
                     778     ; */
                     779     ; void uart_init(void)
                     780     
----                 781             RSEG  ?PR?uart_init?MAIN
0000                 782     uart_init:
                     783                             ; SOURCE LINE # 236
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE    13

                     784     ; {
                     785                             ; SOURCE LINE # 237
                     786     ;     TMOD = 0x21;        // 定时器1工作在方式2（自动重装）
                     787                             ; SOURCE LINE # 238
0000 758921          788             MOV     TMOD,#021H
                     789     ;     SCON = 0x50;        // 10位uart，允许串行接受
                     790                             ; SOURCE LINE # 239
0003 759850          791             MOV     SCON,#050H
                     792     ; 
                     793     ;     TH1 = 0xFD;
                     794                             ; SOURCE LINE # 241
0006 758DFD          795             MOV     TH1,#0FDH
                     796     ;     TL1 = 0xFD;
                     797                             ; SOURCE LINE # 242
0009 758BFD          798             MOV     TL1,#0FDH
                     799     ; 
                     800     ;     TR1 = 1;
                     801                             ; SOURCE LINE # 244
000C D28E            802             SETB    TR1
                     803     ; }
                     804                             ; SOURCE LINE # 245
000E 22              805             RET     
                     806     ; END OF uart_init
                     807     
                     808     ; 
                     809     ; /**
                     810     ;  * UART发送一字节
                     811     ; */
                     812     ; void UART_Send_Byte(uint8 dat)
                     813     
----                 814             RSEG  ?PR?_UART_Send_Byte?MAIN
0000                 815     _UART_Send_Byte:
                     816                             ; SOURCE LINE # 250
                     817     ;---- Variable 'dat?950' assigned to Register 'R7' ----
                     818     ; {
                     819                             ; SOURCE LINE # 251
                     820     ;       SBUF = dat;
                     821                             ; SOURCE LINE # 252
0000 8F99            822             MOV     SBUF,R7
0002                 823     ?C0047:
                     824     ;       while (TI == 0);
                     825                             ; SOURCE LINE # 253
0002 3099FD          826             JNB     TI,?C0047
0005                 827     ?C0048:
                     828     ;       TI = 0;
                     829                             ; SOURCE LINE # 254
0005 C299            830             CLR     TI
                     831     ; }
                     832                             ; SOURCE LINE # 255
0007 22              833             RET     
                     834     ; END OF _UART_Send_Byte
                     835     
                     836     ; 
                     837     ; /**
                     838     ;  * 将数据转换成ASC码并通过UART发送出去
                     839     ; */
                     840     ; void UART_Send_Dat(uint8 dat)
                     841     
----                 842             RSEG  ?PR?_UART_Send_Dat?MAIN
0000                 843     L?0058:
                     844             USING   0
0000 7F01            845             MOV     R7,#01H
0002 120000   F      846             LCALL   _UART_Send_Dat
0005 7F01            847             MOV     R7,#01H
0007                 848     _UART_Send_Dat:
                     849             USING   0
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE    14

                     850                             ; SOURCE LINE # 260
                     851     ;---- Variable 'dat?1051' assigned to Register 'R6' ----
0007 AE07            852             MOV     R6,AR7
                     853     ; {
                     854                             ; SOURCE LINE # 261
                     855     ;       UART_Send_Byte(dat/10 + '0');
                     856                             ; SOURCE LINE # 262
0009 EE              857             MOV     A,R6
000A 75F00A          858             MOV     B,#0AH
000D 84              859             DIV     AB
000E 2430            860             ADD     A,#030H
0010 FF              861             MOV     R7,A
0011 120000   F      862             LCALL   _UART_Send_Byte
                     863     ;       UART_Send_Byte(dat%10 + '0');
                     864                             ; SOURCE LINE # 263
0014 EE              865             MOV     A,R6
0015 75F00A          866             MOV     B,#0AH
0018 84              867             DIV     AB
0019 E5F0            868             MOV     A,B
001B 2430            869             ADD     A,#030H
001D FF              870             MOV     R7,A
001E 020000   F      871             LJMP    _UART_Send_Byte
                     872     ; END OF _UART_Send_Dat
                     873     
                     874     ; }
                     875     ; 
                     876     ; 
                     877     ; main()
                     878     
----                 879             RSEG  ?PR?main?MAIN
0000                 880     main:
                     881             USING   0
                     882                             ; SOURCE LINE # 267
                     883     ; {
                     884                             ; SOURCE LINE # 268
                     885     ;       int16 ans;
                     886     ; 
                     887     ;       uart_init();
                     888                             ; SOURCE LINE # 271
0000 120000   F      889             LCALL   uart_init
0003                 890     ?C0051:
                     891     ;       
                     892     ;       while (1)
                     893                             ; SOURCE LINE # 273
                     894     ;       {
                     895                             ; SOURCE LINE # 274
                     896     ;               UART_Send_Dat(1);
                     897                             ; SOURCE LINE # 275
                     898     ;               UART_Send_Dat(1);
                     899                             ; SOURCE LINE # 276
0003 120000   F      900             LCALL   L?0058
                     901     ;               UART_Send_Dat(1);
                     902                             ; SOURCE LINE # 277
                     903     ;               UART_Send_Dat(1);
                     904                             ; SOURCE LINE # 278
0006 120000   F      905             LCALL   L?0058
                     906     ;               UART_Send_Dat(1);
                     907                             ; SOURCE LINE # 279
0009 7F01            908             MOV     R7,#01H
000B 120000   F      909             LCALL   _UART_Send_Dat
                     910     ;               
                     911     ;               ds1302_start();
                     912                             ; SOURCE LINE # 281
000E 120000   F      913             LCALL   ds1302_start
                     914     ;               UART_Send_Dat(2);
                     915                             ; SOURCE LINE # 282
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE    15

0011 7F02            916             MOV     R7,#02H
0013 120000   F      917             LCALL   _UART_Send_Dat
                     918     ; 
                     919     ;               mdelay(1000); // 延时1秒
                     920                             ; SOURCE LINE # 284
0016 7FE8            921             MOV     R7,#0E8H
0018 7E03            922             MOV     R6,#03H
001A 120000   F      923             LCALL   _mdelay
                     924     ;               UART_Send_Dat(3);
                     925                             ; SOURCE LINE # 285
001D 7F03            926             MOV     R7,#03H
001F 120000   F      927             LCALL   _UART_Send_Dat
                     928     ; 
                     929     ;               ans=ds1302_read_temp();
                     930                             ; SOURCE LINE # 287
0022 120000   F      931             LCALL   ds1302_read_temp
                     932     ;---- Variable 'ans?1152' assigned to Register 'R4/R5' ----
0025 AD07            933             MOV     R5,AR7
0027 AC06            934             MOV     R4,AR6
                     935     ;       
                     936     ;               if (ans < 0)
                     937                             ; SOURCE LINE # 289
0029 C3              938             CLR     C
002A EC              939             MOV     A,R4
002B 6480            940             XRL     A,#080H
002D 9480            941             SUBB    A,#080H
002F 500C            942             JNC     ?C0053
                     943     ;               {
                     944                             ; SOURCE LINE # 290
                     945     ;                       UART_Send_Byte('-');
                     946                             ; SOURCE LINE # 291
0031 7F2D            947             MOV     R7,#02DH
0033 120000   F      948             LCALL   _UART_Send_Byte
                     949     ;                       ans = -ans;
                     950                             ; SOURCE LINE # 292
0036 C3              951             CLR     C
0037 E4              952             CLR     A
0038 9D              953             SUBB    A,R5
0039 FD              954             MOV     R5,A
003A E4              955             CLR     A
003B 9C              956             SUBB    A,R4
003C FC              957             MOV     R4,A
                     958     ;               }
                     959                             ; SOURCE LINE # 293
003D                 960     ?C0053:
                     961     ;       
                     962     ;               UART_Send_Dat(ans);
                     963                             ; SOURCE LINE # 295
003D AF05            964             MOV     R7,AR5
003F 120000   F      965             LCALL   _UART_Send_Dat
                     966     ;               UART_Send_Byte('\r');
                     967                             ; SOURCE LINE # 296
0042 7F0D            968             MOV     R7,#0DH
0044 120000   F      969             LCALL   _UART_Send_Byte
                     970     ;               UART_Send_Byte('\n');
                     971                             ; SOURCE LINE # 297
0047 7F0A            972             MOV     R7,#0AH
0049 120000   F      973             LCALL   _UART_Send_Byte
                     974     ;       }
                     975                             ; SOURCE LINE # 298
004C 80B5            976             SJMP    ?C0051
                     977     ; END OF main
                     978     
                     979             END
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE    16

SYMBOL TABLE LISTING
------ ----- -------


N A M E                      T Y P E  V A L U E   ATTRIBUTES

?BI?DS1302_RESET?MAIN . . .  B SEG    0001H       REL=UNIT
?C0002. . . . . . . . . . .  C ADDR   0004H   R   SEG=?PR?_MDELAY?MAIN
?C0004. . . . . . . . . . .  C ADDR   001AH   R   SEG=?PR?_MDELAY?MAIN
?C0009. . . . . . . . . . .  C ADDR   0002H   R   SEG=?PR?DS1302_RESET?MAIN
?C0011. . . . . . . . . . .  C ADDR   0005H   R   SEG=?PR?DS1302_RESET?MAIN
?C0012. . . . . . . . . . .  C ADDR   0035H   R   SEG=?PR?DS1302_RESET?MAIN
?C0021. . . . . . . . . . .  C ADDR   0043H   R   SEG=?PR?DS1302_RESET?MAIN
?C0026. . . . . . . . . . .  C ADDR   000AH   R   SEG=?PR?_DS1302_WRITE_BYTE?MAIN
?C0027. . . . . . . . . . .  C ADDR   002CH   R   SEG=?PR?_DS1302_WRITE_BYTE?MAIN
?C0030. . . . . . . . . . .  C ADDR   0004H   R   SEG=?PR?DS1302_READ_BYTE?MAIN
?C0039. . . . . . . . . . .  C ADDR   002DH   R   SEG=?PR?DS1302_READ_BYTE?MAIN
?C0042. . . . . . . . . . .  C ADDR   0038H   R   SEG=?PR?DS1302_READ_BYTE?MAIN
?C0043. . . . . . . . . . .  C ADDR   0042H   R   SEG=?PR?DS1302_READ_BYTE?MAIN
?C0045. . . . . . . . . . .  C ADDR   0028H   R   SEG=?PR?DS1302_READ_TEMP?MAIN
?C0047. . . . . . . . . . .  C ADDR   0002H   R   SEG=?PR?_UART_SEND_BYTE?MAIN
?C0048. . . . . . . . . . .  C ADDR   0005H   R   SEG=?PR?_UART_SEND_BYTE?MAIN
?C0051. . . . . . . . . . .  C ADDR   0003H   R   SEG=?PR?MAIN?MAIN
?C0053. . . . . . . . . . .  C ADDR   003DH   R   SEG=?PR?MAIN?MAIN
?C0055. . . . . . . . . . .  C ADDR   0031H   R   SEG=?PR?_UDELAY?MAIN
?C0056. . . . . . . . . . .  C ADDR   000EH   R   SEG=?PR?_MDELAY?MAIN
?C0057. . . . . . . . . . .  C ADDR   001FH   R   SEG=?PR?DS1302_READ_TEMP?MAIN
?C?IMUL . . . . . . . . . .  C ADDR   -----       EXT
?C_STARTUP. . . . . . . . .  C ADDR   -----       EXT
?DS1302_READ_BYTE?BYTE. . .  D ADDR   0000H   R   SEG=?DT?DS1302_READ_BYTE?MAIN
?DS1302_READ_TEMP?BYTE. . .  D ADDR   0000H   R   SEG=?DT?DS1302_READ_TEMP?MAIN
?DS1302_RESET?BIT . . . . .  B ADDR   0000H.0 R   SEG=?BI?DS1302_RESET?MAIN
?DT?DS1302_READ_BYTE?MAIN .  D SEG    0001H       REL=UNIT
?DT?DS1302_READ_TEMP?MAIN .  D SEG    0002H       REL=UNIT
?DT?_DS1302_WRITE_BYTE?MAIN  D SEG    0001H       REL=UNIT
?DT?_MDELAY?MAIN. . . . . .  D SEG    0002H       REL=UNIT
?PR?DS1302_INIT?MAIN. . . .  C SEG    0009H       REL=UNIT
?PR?DS1302_READ_BYTE?MAIN .  C SEG    0043H       REL=UNIT
?PR?DS1302_READ_TEMP?MAIN .  C SEG    0029H       REL=UNIT
?PR?DS1302_RESET?MAIN . . .  C SEG    004CH       REL=UNIT
?PR?DS1302_START?MAIN . . .  C SEG    000DH       REL=UNIT
?PR?MAIN?MAIN . . . . . . .  C SEG    004EH       REL=UNIT
?PR?UART_INIT?MAIN. . . . .  C SEG    000FH       REL=UNIT
?PR?_DS1302_WRITE_BYTE?MAIN  C SEG    0035H       REL=UNIT
?PR?_MDELAY?MAIN. . . . . .  C SEG    001BH       REL=UNIT
?PR?_UART_SEND_BYTE?MAIN. .  C SEG    0008H       REL=UNIT
?PR?_UART_SEND_DAT?MAIN . .  C SEG    0021H       REL=UNIT
?PR?_UDELAY?MAIN. . . . . .  C SEG    005EH       REL=UNIT
?_DS1302_WRITE_BYTE?BYTE. .  D ADDR   0000H   R   SEG=?DT?_DS1302_WRITE_BYTE?MAIN
?_MDELAY?BYTE . . . . . . .  D ADDR   0000H   R   SEG=?DT?_MDELAY?MAIN
AC. . . . . . . . . . . . .  B ADDR   00D0H.6 A   
ACC . . . . . . . . . . . .  D ADDR   00E0H   A   
ADC_CONTR . . . . . . . . .  D ADDR   00BCH   A   
ADC_RES . . . . . . . . . .  D ADDR   00BDH   A   
ADC_RESL. . . . . . . . . .  D ADDR   00BEH   A   
AR2 . . . . . . . . . . . .  D ADDR   0002H   A   
AR3 . . . . . . . . . . . .  D ADDR   0003H   A   
AR5 . . . . . . . . . . . .  D ADDR   0005H   A   
AR6 . . . . . . . . . . . .  D ADDR   0006H   A   
AR7 . . . . . . . . . . . .  D ADDR   0007H   A   
AUXR. . . . . . . . . . . .  D ADDR   008EH   A   
AUXR1 . . . . . . . . . . .  D ADDR   00A2H   A   
B . . . . . . . . . . . . .  D ADDR   00F0H   A   
BRT . . . . . . . . . . . .  D ADDR   009CH   A   
BUS_SPEED . . . . . . . . .  D ADDR   00A1H   A   
CCAP0H. . . . . . . . . . .  D ADDR   00FAH   A   
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE    17

CCAP0L. . . . . . . . . . .  D ADDR   00EAH   A   
CCAP1H. . . . . . . . . . .  D ADDR   00FBH   A   
CCAP1L. . . . . . . . . . .  D ADDR   00EBH   A   
CCAPM0. . . . . . . . . . .  D ADDR   00DAH   A   
CCAPM1. . . . . . . . . . .  D ADDR   00DBH   A   
CCF0. . . . . . . . . . . .  B ADDR   00D8H.0 A   
CCF1. . . . . . . . . . . .  B ADDR   00D8H.1 A   
CCON. . . . . . . . . . . .  D ADDR   00D8H   A   
CF. . . . . . . . . . . . .  B ADDR   00D8H.7 A   
CH. . . . . . . . . . . . .  D ADDR   00F9H   A   
CL. . . . . . . . . . . . .  D ADDR   00E9H   A   
CLK_DIV . . . . . . . . . .  D ADDR   0097H   A   
CMOD. . . . . . . . . . . .  D ADDR   00D9H   A   
CR. . . . . . . . . . . . .  B ADDR   00D8H.6 A   
CY. . . . . . . . . . . . .  B ADDR   00D0H.7 A   
DPH . . . . . . . . . . . .  D ADDR   0083H   A   
DPL . . . . . . . . . . . .  D ADDR   0082H   A   
DQ. . . . . . . . . . . . .  B ADDR   0090H.1 A   
DS1302_INIT . . . . . . . .  C ADDR   0000H   R   SEG=?PR?DS1302_INIT?MAIN
DS1302_READ_BYTE. . . . . .  C ADDR   0000H   R   SEG=?PR?DS1302_READ_BYTE?MAIN
DS1302_READ_TEMP. . . . . .  C ADDR   0000H   R   SEG=?PR?DS1302_READ_TEMP?MAIN
DS1302_RESET. . . . . . . .  C ADDR   0000H   R   SEG=?PR?DS1302_RESET?MAIN
DS1302_START. . . . . . . .  C ADDR   0000H   R   SEG=?PR?DS1302_START?MAIN
EA. . . . . . . . . . . . .  B ADDR   00A8H.7 A   
EADC. . . . . . . . . . . .  B ADDR   00A8H.5 A   
ELVD. . . . . . . . . . . .  B ADDR   00A8H.6 A   
ES. . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0 . . . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1 . . . . . . . . . . . .  B ADDR   00A8H.3 A   
EX0 . . . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1 . . . . . . . . . . . .  B ADDR   00A8H.2 A   
F0. . . . . . . . . . . . .  B ADDR   00D0H.5 A   
FLAG?343. . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?DS1302_RESET?MAIN
IAP_ADDRH . . . . . . . . .  D ADDR   00C3H   A   
IAP_ADDRL . . . . . . . . .  D ADDR   00C4H   A   
IAP_CMD . . . . . . . . . .  D ADDR   00C5H   A   
IAP_CONTR . . . . . . . . .  D ADDR   00C7H   A   
IAP_DATA. . . . . . . . . .  D ADDR   00C2H   A   
IAP_TRIG. . . . . . . . . .  D ADDR   00C6H   A   
IE. . . . . . . . . . . . .  D ADDR   00A8H   A   
IE0 . . . . . . . . . . . .  B ADDR   0088H.1 A   
IE1 . . . . . . . . . . . .  B ADDR   0088H.3 A   
IE2 . . . . . . . . . . . .  D ADDR   00AFH   A   
IP. . . . . . . . . . . . .  D ADDR   00B8H   A   
IP2 . . . . . . . . . . . .  D ADDR   00B5H   A   
IPH . . . . . . . . . . . .  D ADDR   00B7H   A   
IPH2. . . . . . . . . . . .  D ADDR   00B6H   A   
IT0 . . . . . . . . . . . .  B ADDR   0088H.0 A   
IT1 . . . . . . . . . . . .  B ADDR   0088H.2 A   
L?0058. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_UART_SEND_DAT?MAIN
L?0059. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_UDELAY?MAIN
L?0060. . . . . . . . . . .  C ADDR   0002H   R   SEG=?PR?_UDELAY?MAIN
LOOP. . . . . . . . . . . .  C ADDR   004DH   R   SEG=?PR?_UDELAY?MAIN
LOOP1 . . . . . . . . . . .  C ADDR   005BH   R   SEG=?PR?_UDELAY?MAIN
MAIN. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?MAIN?MAIN
MS?142. . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_MDELAY?MAIN
OV. . . . . . . . . . . . .  B ADDR   00D0H.2 A   
P . . . . . . . . . . . . .  B ADDR   00D0H.0 A   
P0. . . . . . . . . . . . .  D ADDR   0080H   A   
P0M0. . . . . . . . . . . .  D ADDR   0094H   A   
P0M1. . . . . . . . . . . .  D ADDR   0093H   A   
P1. . . . . . . . . . . . .  D ADDR   0090H   A   
P1ASF . . . . . . . . . . .  D ADDR   009DH   A   
P1M0. . . . . . . . . . . .  D ADDR   0092H   A   
P1M1. . . . . . . . . . . .  D ADDR   0091H   A   
P2. . . . . . . . . . . . .  D ADDR   00A0H   A   
A51 MACRO ASSEMBLER  MAIN                                                                 11/15/2014 21:05:16 PAGE    18

P2M0. . . . . . . . . . . .  D ADDR   0096H   A   
P2M1. . . . . . . . . . . .  D ADDR   0095H   A   
P3. . . . . . . . . . . . .  D ADDR   00B0H   A   
P3M0. . . . . . . . . . . .  D ADDR   00B2H   A   
P3M1. . . . . . . . . . . .  D ADDR   00B1H   A   
P4. . . . . . . . . . . . .  D ADDR   00C0H   A   
P4M0. . . . . . . . . . . .  D ADDR   00B4H   A   
P4M1. . . . . . . . . . . .  D ADDR   00B3H   A   
P4SW. . . . . . . . . . . .  D ADDR   00BBH   A   
P5. . . . . . . . . . . . .  D ADDR   00C8H   A   
P5M0. . . . . . . . . . . .  D ADDR   00CAH   A   
P5M1. . . . . . . . . . . .  D ADDR   00C9H   A   
PADC. . . . . . . . . . . .  B ADDR   00B8H.5 A   
PCA_PWM0. . . . . . . . . .  D ADDR   00F2H   A   
PCA_PWM1. . . . . . . . . .  D ADDR   00F3H   A   
PCON. . . . . . . . . . . .  D ADDR   0087H   A   
PLVD. . . . . . . . . . . .  B ADDR   00B8H.6 A   
PPCA. . . . . . . . . . . .  B ADDR   00B8H.7 A   
PS. . . . . . . . . . . . .  B ADDR   00B8H.4 A   
PSW . . . . . . . . . . . .  D ADDR   00D0H   A   
PT0 . . . . . . . . . . . .  B ADDR   00B8H.1 A   
PT1 . . . . . . . . . . . .  B ADDR   00B8H.3 A   
PX0 . . . . . . . . . . . .  B ADDR   00B8H.0 A   
PX1 . . . . . . . . . . . .  B ADDR   00B8H.2 A   
RB8 . . . . . . . . . . . .  B ADDR   0098H.2 A   
REN . . . . . . . . . . . .  B ADDR   0098H.4 A   
RI. . . . . . . . . . . . .  B ADDR   0098H.0 A   
RS0 . . . . . . . . . . . .  B ADDR   00D0H.3 A   
RS1 . . . . . . . . . . . .  B ADDR   00D0H.4 A   
S2BUF . . . . . . . . . . .  D ADDR   009BH   A   
S2CON . . . . . . . . . . .  D ADDR   009AH   A   
SADDR . . . . . . . . . . .  D ADDR   00A9H   A   
SADEN . . . . . . . . . . .  D ADDR   00B9H   A   
SBUF. . . . . . . . . . . .  D ADDR   0099H   A   
SCON. . . . . . . . . . . .  D ADDR   0098H   A   
SM0 . . . . . . . . . . . .  B ADDR   0098H.7 A   
SM1 . . . . . . . . . . . .  B ADDR   0098H.6 A   
SM2 . . . . . . . . . . . .  B ADDR   0098H.5 A   
SP. . . . . . . . . . . . .  D ADDR   0081H   A   
SPCTL . . . . . . . . . . .  D ADDR   00CEH   A   
SPDAT . . . . . . . . . . .  D ADDR   00CFH   A   
SPSTAT. . . . . . . . . . .  D ADDR   00CDH   A   
TB8 . . . . . . . . . . . .  B ADDR   0098H.3 A   
TCON. . . . . . . . . . . .  D ADDR   0088H   A   
TEMP_DATA?748 . . . . . . .  D ADDR   0000H   R   SEG=?DT?DS1302_READ_TEMP?MAIN
TF0 . . . . . . . . . . . .  B ADDR   0088H.5 A   
TF1 . . . . . . . . . . . .  B ADDR   0088H.7 A   
TH0 . . . . . . . . . . . .  D ADDR   008CH   A   
TH1 . . . . . . . . . . . .  D ADDR   008DH   A   
TI. . . . . . . . . . . . .  B ADDR   0098H.1 A   
TL0 . . . . . . . . . . . .  D ADDR   008AH   A   
TL1 . . . . . . . . . . . .  D ADDR   008BH   A   
TMOD. . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . .  B ADDR   0088H.4 A   
TR1 . . . . . . . . . . . .  B ADDR   0088H.6 A   
UART_INIT . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?UART_INIT?MAIN
VAL?444 . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_DS1302_WRITE_BYTE?MAIN
VALUE?547 . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?DS1302_READ_BYTE?MAIN
WAKE_CLKO . . . . . . . . .  D ADDR   008FH   A   
WDT_CONTR . . . . . . . . .  D ADDR   00C1H   A   
_DS1302_WRITE_BYTE. . . . .  C ADDR   0000H   R   SEG=?PR?_DS1302_WRITE_BYTE?MAIN
_MDELAY . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_MDELAY?MAIN
_UART_SEND_BYTE . . . . . .  C ADDR   0000H   R   SEG=?PR?_UART_SEND_BYTE?MAIN
_UART_SEND_DAT. . . . . . .  C ADDR   0007H   R   SEG=?PR?_UART_SEND_DAT?MAIN
_UDELAY . . . . . . . . . .  C ADDR   0006H   R   SEG=?PR?_UDELAY?MAIN


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
